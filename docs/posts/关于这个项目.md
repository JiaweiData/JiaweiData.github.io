---
date:
  created: 2024-08-10
  updated: 2024-08-11
authors:
  - wjw
categories:
  - 杂项
tags:
  - mkdocs
comments: true
---
# 关于这个博客项目

终于有机会开始考虑和总结一下这些年工作的感悟。感觉有些东西想写，有些东西也想做。通过这个博客梳理一下思路。算是做一个总结。
<!-- more -->
## 搭建方式

### 概述

 总体使用了 mkdocs 的插件 [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/)

### 关于我
    - timeline 基于 [Neoteroi:mkdocs-plugins](https://github.com/Neoteroi/mkdocs-plugins)，并且针对多行 content 基于这个 issue [#25](https://github.com/Neoteroi/mkdocs-plugins/issues/25) 对docs/css/neoteroi-mkdocs.css进行了修改

### 草稿
    - 使用了 mkdocs 的原生配置方式，发现Material for MkDocs的不太好用。可能是 1.6 版本发生了变更。导致行为有些不符合预期

        ``` yaml title="mkdocs.yml"
        ...
        draft_docs: | # (1)!
          drafts/               # A "drafts" directory anywhere.
          _unpublished.md       # A md file ending in _unpublished.md
          !/foo_unpublished.md  # But keep this particular file.

        ```

        1. 参考[这里](https://www.mkdocs.org/user-guide/configuration/#draft_docs)

    - 这样只需要把草稿放到 drafts 文件夹中就可以了，可以在写作时预览，但发布时会跳过，非常方便。

### 评论系统

参考[这里](https://squidfunk.github.io/mkdocs-material/setup/adding-a-comment-system/#adding-a-comment-system) 进行配置

1. 修改 mkdocs.yml

    ```yaml title="mkdocs.yml" hl_lines="3"

    theme:
      name: material
      custom_dir: overrides

    ```

2. 在 https://giscus.app/zh-CN 配置 获取配置

3. 增加 overrides/partials/comments.html

    ``` html title="comments.html" linenums="0" hl_lines="5-20"

      {% if page.meta.comments %}
    <h2 id="__comments">{{ lang.t("meta.comments") }}</h2>
    <!-- Insert generated snippet here -->

    <script src="https://giscus.app/client.js"
          data-repo="jiaweidata/jiaweidata.github.io"
          data-repo-id="R_kgDOMheueA"
          data-category="Announcements"
          data-category-id="DIC_kwDOMheueM4Chqc0"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="dark"
          data-lang="zh-CN"
          data-loading="lazy"
          crossorigin="anonymous"
          async>
    </script>

    <!-- Synchronize Giscus theme with palette -->
    <script>
      var giscus = document.querySelector("script[src*=giscus]")

      // Set palette on initial load
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate"
          ? "transparent_dark"
          : "light"

        // Instruct Giscus to set theme
        giscus.setAttribute("data-theme", theme)
      }

      // Register event handlers after documented loaded
      document.addEventListener("DOMContentLoaded", function() {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function() {
          var palette = __md_get("__palette")
          if (palette && typeof palette.color === "object") {
            var theme = palette.color.scheme === "slate"
              ? "transparent_dark"
              : "light"

            // Instruct Giscus to change theme
            var frame = document.querySelector(".giscus-frame")
            frame.contentWindow.postMessage(
              { giscus: { setConfig: { theme } } },
              "https://giscus.app"
            )
          }
        })
      })
    </script>
    {% endif %}

    ```
    高亮的代码是在第2步生成的配置信息
